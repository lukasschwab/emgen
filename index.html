<html>
  <head>
    <title>emgen: email generator</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="shortcut icon" href="emgen.ico">
  </head>
  <body>
    <div class="main">
      <h1>emgen</h1>
      <p class="description">Similar to <a href="http://emailgenerator.io/">Email Generator</a>, emgen guesses emails.<br>Use Rapportive or a similar tool to validate an address.</p>
      <p class="inputLine">First name: <input autofocus name="firstName" type="text" maxlength="512" id="firstName" class="nameField"placeholder="firstname"/></p>
      <p class="inputLine">Last name: <input name="lastName" type="text" maxlength="512" id="lastName" class="nameField"placeholder="lastname"/></p>
      <p class="inputLine">Domain: <input name="customDomain" type="text" maxlength="512" id="customDomain" class="nameField" placeholder="domain.com"/></p>
      <button type="button" id="trigger">generate</button>
      <p><textarea readonly type="text" maxlength="10000000" id="out" class="outbox" onclick="this.focus();this.select()"></textarea></p>
      <p><a id="configure">configure</a> &middot; <a href="https://github.com/lukasschwab/emgen">emgen on github</a> &middot; <a href="http://lukasschwab.github.io/blog/">lukas schwab</a></p>
    
        <div id="configDiv" style="display: none;">
          <p>Domains: 
            <input type="checkbox" id="gmail" value="gmail" checked>@gmail.com
            <input type="checkbox" id="yahoo" value="yahoo">@yahoo.com
            <input type="checkbox" id="hotmail" value="hotmail">@hotmail.com
            <input type="checkbox" id="outlook" value="outlook">@outlook.com
          </p>
        </div>
    </div>
    <script>
      document.getElementById("trigger").onclick = function() {
        out = document.getElementById("out");
        out.value = "";

        first = document.getElementById("firstName").value.toLowerCase();
        last = document.getElementById("lastName").value.toLowerCase();
        domain = document.getElementById("customDomain").value.toLowerCase();
        if (first == "" || last == "" || domain == "") {
          console.log("Insufficient text entered");
          return;
        }

        // TODO: Make this configurable!
        domains = getDomains();
        emails = [];

        for (var i = 0; i < domains.length; i++) {
          out.value += first + "@" + domains[i] + ", ";
          out.value += last + "@" + domains[i] + ", ";
          out.value += first + last + "@" + domains[i] + ", ";
          out.value += first + "." + last + "@" + domains[i] + ", ";
          out.value += last + "." + first + "@" + domains[i] + ", ";
          out.value += first + "_" + last + "@" + domains[i] + ", ";
          out.value += last + "_" + first + "@" + domains[i] + ", ";
          out.value += first[0] + last + "@" + domains[i] + ", ";
          out.value += last + first[0] + "@" + domains[i] + ", ";
          // TODO: add others: firstl, lfirst...
        }
        out.value = out.value.slice(0, -2);
        out.focus();
        out.select();
      }

      document.getElementById("configure").onclick = function() {
        cdiv = document.getElementById("configDiv");
        if (cdiv.style.display == "block") {
          cdiv.style.display = "none";
        } else {
          cdiv.style.display = "block";
        }
      }

      getDomains = function() {
        domains = [document.getElementById("customDomain").value.toLowerCase()];
        // TODO: replace with iteration over list
        if (document.getElementById("gmail").checked) {
          domains[domains.length] = "gmail.com";
        }
        if (document.getElementById("yahoo").checked) {
          domains[domains.length] = "yahoo.com";
        }
        if (document.getElementById("hotmail").checked) {
          domains[domains.length] = "hotmail.com";
        }
        if (document.getElementById("outlook").checked) {
          domains[domains.length] = "outlook.com";
        }
        return domains;
      }
    </script>
  </body>
</html>